<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <title>Krit - Listening</title>
    </head>

<style>
body {
	background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
	background-size: 400% 400%;
	animation: gradient 75s ease infinite;
	height: 100vh;
}

@keyframes gradient {
	0% {
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
	100% {
		background-position: 0% 50%;
	}
}
</style>

    <body><br><br><br><br><br><br>
        
        <div class="container text-center">
        <div class="row">

            <div class="col-6 col-md-4 mx-auto d-block">

                <div><img class="rounded vw-30 vh-30" id="track-image" style="width: 30vh; height: 30vh;" src="" alt="" /></div>
                <br><div class="fs-6" style="font-size: 10px;" id="now-playing-status"></div>

            </div>

            <div class="col-md-8 text-start">
   
                <br>
                <i class="fa-regular fa-music"></i> <div class="fs-2" id="track-name"></div>
                <br><hr><br>
                <i class="fa-regular fa-user"></i> <div class="fs-5" id="artist-name"></div>
                <br><hr><br>
                <i class="fa-regular fa-compact-disc"></i> <div class="fs-5" id="album-name"></div>
            
            </div>
        
        </div>
        </div>

        
    <footer><br><br><br><br><p class="text-center align-text-bottom">Create by Krit, with broken HTML</p></footer>
        <script>
            const Data = "https://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=kritsa0&api_key=cb1531ffa8ff4fef76d39294887a747f&format=json&limit=1";

            const requestCall = apiCall =>
            fetch(apiCall)
                .then(res => res.json())
                .then(data => {
                    const recentTrack = data.recenttracks.track[0];

                    const artistName = recentTrack.artist['#text'];
                    const trackImage = recentTrack.image.find(img => img.size === 'extralarge')['#text'];
                    const trackName = recentTrack.name;
                    const albumName = recentTrack.album['#text'];
                    const nowPlaying = recentTrack['@attr'] && recentTrack['@attr'].nowplaying;

                    document.getElementById('artist-name').innerText = artistName;
                    document.getElementById('track-image').src = trackImage;
                    document.getElementById('track-image').alt = trackName;
                    document.getElementById('track-name').innerText = trackName;
                    document.getElementById('album-name').innerText = albumName;
                    document.getElementById('now-playing-status').innerText = nowPlaying ? "Now Playing" : "Recent Tracks";
                });

            setInterval(() => {
                requestCall(Data);
            }, 15000);
        </script>
    </body>
</html>
